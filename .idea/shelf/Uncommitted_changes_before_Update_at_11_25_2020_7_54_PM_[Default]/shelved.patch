Index: clanok.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>\r\n<?php\r\ninclude 'includes/articleHeader.php';\r\n\r\nif (isset($_GET['p_id'])) {\r\n    $post_id = $_GET['p_id'];\r\n}\r\n\r\ntry {\r\n\r\n    include 'dashboard/includes/db.php';\r\n    $query = \"SELECT * FROM posts WHERE post_id = $post_id \";\r\n\r\n    $send_info = $connection->prepare($query);\r\n\r\n    $send_info->execute();\r\n\r\n    while ($row = $send_info->fetch(PDO::FETCH_ASSOC)) {\r\n\r\n        $post_title = $row['post_title'];\r\n        $post_image = $row['post_image'];\r\n        $post_tags = $row['post_tags'];\r\n        $temp_post_content = strip_tags($row['post_content']);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    echo $e;\r\n}\r\n\r\narticleHeader($post_title,$post_image, $temp_post_content, $post_tags);\r\n\r\n?>\r\n<body>\r\n<div class=\"container content\">\r\n    <?php\r\n    include 'includes/navbar.php';\r\n    ?>\r\n    <!--CONTENT-->\r\n\r\n\r\n    <?php\r\n    if(isset($_GET['p_id'])){\r\n        $post_id = $_GET['p_id'];\r\n    }\r\n\r\n    try{\r\n\r\n        include 'dashboard/includes/db.php';\r\n        $query = \"SELECT * FROM posts WHERE post_id = $post_id \";\r\n\r\n        $send_info = $connection->prepare($query);\r\n\r\n        $send_info->execute();\r\n\r\n        while ($row = $send_info->fetch(PDO::FETCH_ASSOC)){\r\n\r\n            $post_title = $row['post_title'];\r\n            $post_author = $row['post_author'];\r\n\r\n            $post_date1 = strtotime($row['post_date']);\r\n            $post_date = date( 'd. M. Y', $post_date1 );\r\n            $post_content = $row['post_content'];\r\n            $post_image = $row['post_image'];\r\n            $post_status = $row['post_status'];\r\n            $post_tags = $row['post_tags'];\r\n        }\r\n\r\n    }\r\n    catch (Exception $e){\r\n        echo $e;\r\n    }\r\n\r\n    ?>\r\n\r\n    <div class=\"row\">\r\n            <!-- S PRAVOU STRANOU : POSLEDNE CLANKY -->\r\n            <div class=\"col-lg-9 col-md-9 col-sm-12 col-xs-12 clanokBody\">\r\n        <!-- BEZ PRAVEJ STRANY : POSLEDNE CLANKY\r\n            <div class=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 clanokBody\">-->\r\n                <?php\r\n                if ($post_status == 'draft'){\r\n                    echo \"<h3 class='text-danger'>Tento článok nie je publikovaný</h3>\";\r\n                }\r\n                ?>\r\n            <h2><?php echo $post_title; ?><br>\r\n            <small>\r\n                <!-- Share on FB button -->\r\n                <span class=\"glyphicon glyphicon glyphicon-calendar\"></span> <?php echo $post_date; ?> | <span class=\"glyphicon glyphicon glyphicon-user\"></span> <?php echo $post_author; ?> </small>\r\n                <a style=\"margin-left: 10px;\" class=\"btn btn-primary btn-sm\" href=\"https://www.facebook.com/sharer/sharer.php?u=kusjanakollara.org/clanok.php?p_id=<?=$post_id?>\" target=\"_blank\">\r\n                    <i class=\"fab fa-facebook\"></i> Zdieľať\r\n                </a>\r\n            </h2>\r\n<hr>\r\n    <!---TEXT--->\r\n    <div class=\"text-justify contentBody\">\r\n        <?php echo $post_content; ?>\r\n        <p class=\"text-muted\">Kľúčové slová: <?php echo $post_tags; ?></p>\r\n\r\n    </div>\r\n            </div>\r\n\r\n<!--SIDEBAR-->\r\n\r\n        <?php\r\n\r\n        include 'includes/sidebar.php';\r\n        ?>\r\n\r\n\r\n</div>\r\n</div>\r\n\r\n<!--FOOTER-->\r\n<?php include 'includes/footer.php'; ?>\r\n<?php\r\nfooter(\"other\");\r\n?>\r\n\r\n\r\n\r\n<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->\r\n<script src=\"js/bootstrap.js\"></script>\r\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js\"></script>\r\n\r\n<script src=\"links/link.js\"></script>\r\n</body>\r\n<!--   font-family: 'Istok Web', sans-serif;   -->\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- clanok.php	(revision d85b7fa12db8d13f2f23fa4b471af7fa85b2e855)
+++ clanok.php	(date 1605213302064)
@@ -1,5 +1,5 @@
-
 <?php
+session_start();
 include 'includes/articleHeader.php';
 
 if (isset($_GET['p_id'])) {
@@ -20,8 +20,14 @@
         $post_title = $row['post_title'];
         $post_image = $row['post_image'];
         $post_tags = $row['post_tags'];
+        $post_status = $row['post_status'];
         $temp_post_content = strip_tags($row['post_content']);
     }
+    if (!isset($_SESSION['user_role']) && $post_status == 'draft'){
+
+        header('Location: index.php');
+    }
+
 
 } catch (Exception $e) {
     echo $e;
@@ -29,6 +35,7 @@
 
 articleHeader($post_title,$post_image, $temp_post_content, $post_tags);
 
+
 ?>
 <body>
 <div class="container content">
@@ -80,15 +87,23 @@
                 <?php
                 if ($post_status == 'draft'){
                     echo "<h3 class='text-danger'>Tento článok nie je publikovaný</h3>";
+
                 }
                 ?>
             <h2><?php echo $post_title; ?><br>
             <small>
                 <!-- Share on FB button -->
                 <span class="glyphicon glyphicon glyphicon-calendar"></span> <?php echo $post_date; ?> | <span class="glyphicon glyphicon glyphicon-user"></span> <?php echo $post_author; ?> </small>
+                <?php
+                if ($post_status !== 'draft'){
+                ?>
                 <a style="margin-left: 10px;" class="btn btn-primary btn-sm" href="https://www.facebook.com/sharer/sharer.php?u=kusjanakollara.org/clanok.php?p_id=<?=$post_id?>" target="_blank">
                     <i class="fab fa-facebook"></i> Zdieľať
                 </a>
+                <?php
+
+                }
+                ?>
             </h2>
 <hr>
     <!---TEXT--->
Index: dashboard/includes/edit_user.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\n\r\nif (isset($_GET['edit'])) {\r\n    $user_id = $_GET['edit'];\r\n\r\n    try {\r\n\r\n        include \"includes/db.php\";\r\n\r\n        $query = \"SELECT * FROM users WHERE user_id = $user_id \";\r\n\r\n        $send_info = $connection->prepare($query);\r\n\r\n        $send_info->execute();\r\n\r\n        while ($row = $send_info->fetch(PDO::FETCH_ASSOC)) {\r\n            $user_password = $row['user_password'];\r\n            $user_email = $row['user_email'];\r\n            $user_name = $row['user_name'];\r\n            $user_lastname = $row['user_lastname'];\r\n            $user_titul = $row['user_titul'];\r\n            $user_function = $row['user_function'];\r\n            $user_image = $row['user_image'];\r\n            $user_role = $row['user_role'];\r\n\r\n\r\n        }\r\n    }\r\n    catch (Exception $e){\r\n        echo $e;\r\n    }\r\n}\r\n\r\n\r\n\r\n    if (isset($_SESSION['user_id']) && isset($_SESSION['user_role'])){\r\n        //UPDATE USER GENERALY (IF YOU ARE ADMIN)\r\n        if (strpos($_SESSION['user_role'], 'admin') || ($_SESSION['user_id'] == $user_id)){\r\n            if (isset($_POST['edit_user'])){\r\n\r\n            $user_password = $_POST['user_password'];\r\n            $user_password_confirm =  $_POST['user_password_confirm'];\r\n\r\n            //IF USER ENTERED PASSWORDS THAT MATCH\r\n            if (!empty($user_password) && ($user_password == $user_password_confirm)) {\r\n                $user_password = $_POST['user_password'];\r\n                $user_email = $_POST['user_email'];\r\n                $user_name = $_POST['user_name'];\r\n                $user_lastname = $_POST['user_lastname'];\r\n                $user_titul = $_POST['user_titul'];\r\n\r\n                $user_role_array = $_POST['user_role'];\r\n\r\n                $user_role = '';\r\n                foreach ($user_role_array as $array=>$value) {\r\n                    $user_role .= \" $value,\";\r\n                }\r\n                $user_role = substr($user_role, 0, -1);\r\n\r\n                if (strpos($user_role, 'admin')&&strpos($_SESSION['user_role'],'moderator')){\r\n\r\n                    echo \"<h4  class='text-danger'>Nemáte oprávnenie pridať administrátora!</h4>\";\r\n                }\r\n                else{\r\n\r\n                    $user_function = $_POST['user_function'];\r\n                    $user_image = $_FILES['user_image']['name'];\r\n                    $user_image_temp = $_FILES['user_image']['tmp_name'];\r\n\r\n                    move_uploaded_file($user_image_temp, \"../images/ludia/$user_image\");\r\n                    if(empty($user_image)){\r\n\r\n                        try{\r\n                            include 'includes/db.php';\r\n                            $query = \"SELECT * FROM users WHERE user_id = $user_id \";\r\n\r\n\r\n                            $send_info = $connection->prepare($query);\r\n\r\n                            $send_info->execute();\r\n\r\n                            while ($row = $send_info->fetch(PDO::FETCH_ASSOC)) {\r\n                                $user_image = $row['user_image'];\r\n                            }\r\n\r\n                        }catch (Exception $e){\r\n                            echo $e;\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n\r\n                    try{\r\n                        include \"includes/db.php\";\r\n\r\n\r\n                        $query = \"UPDATE users SET \";\r\n\r\n                        $query .= \"user_email = :user_email, \";\r\n                        $query .= \"user_name = :user_name, \";\r\n                        $query .= \"user_lastname = :user_lastname, \";\r\n                        $query .= \"user_titul = :user_titul, \";\r\n                        $query .= \"user_role = :user_role, \";\r\n                        $query .= \"user_function = :user_function, \";\r\n                        $query .= \"user_password = AES_ENCRYPT(:password, :key), \";\r\n                        $query .= \"user_image = :user_image \";\r\n                        $query .= \"WHERE user_id=$user_id \";\r\n\r\n                        $send_info = $connection->prepare($query);\r\n\r\n                        $send_info->bindParam(':user_email', $user_email);\r\n                        $send_info->bindParam(':user_name', $user_name);\r\n                        $send_info->bindParam(':password', $user_password);\r\n                        $send_info->bindParam(':key', $key);\r\n                        $send_info->bindParam(':user_role', $user_role);\r\n                        $send_info->bindParam(':user_function', $user_function);\r\n                        $send_info->bindParam(':user_image', $user_image);\r\n                        $send_info->bindParam(':user_titul', $user_titul);\r\n                        $send_info->bindParam(':user_lastname', $user_lastname);\r\n\r\n                        $send_info->execute();\r\n                        echo \"<h3 class='text-success'>Užívateľ $user_name bol aktualizovaný!</h3>\";\r\n\r\n                        // LOG\r\n                        include \"includes/add_log.php\";\r\n                        $logAction = \"Aktualizoval používateľa \" . $user_name;\r\n                        createLog($connection, $logAction, \"používatelia\");\r\n                    }\r\n                    catch (Exception $e){\r\n                        echo $e;\r\n                    }\r\n\r\n\r\n\r\n                }\r\n            }\r\n            //IF USER DIDNT ENTER PASSWORD IN EDIT FORMULAR\r\n            else if(empty($user_password_confirm) && empty($user_password)){\r\n                try{\r\n                    include 'includes/db.php';\r\n                    $query = \"SELECT * FROM users WHERE user_id = $user_id \";\r\n\r\n\r\n                    $send_info = $connection->prepare($query);\r\n\r\n                    $send_info->execute();\r\n\r\n                    while ($row = $send_info->fetch(PDO::FETCH_ASSOC)) {\r\n                        $user_password = $row['user_password'];\r\n                    }\r\n\r\n                }catch (Exception $e){\r\n                    echo $e;\r\n                }\r\n\r\n                $user_email = $_POST['user_email'];\r\n                $user_name = $_POST['user_name'];\r\n                $user_lastname = $_POST['user_lastname'];\r\n                $user_titul = $_POST['user_titul'];\r\n\r\n                $user_role_array = $_POST['user_role'];\r\n\r\n                $user_role = '';\r\n                foreach ($user_role_array as $array=>$value) {\r\n                    $user_role .= \" $value,\";\r\n                }\r\n                $user_role = substr($user_role, 0, -1);\r\n\r\n                if (strpos($user_role, 'admin')&&strpos($_SESSION['user_role'],'moderator')){\r\n\r\n                    echo \"<h4  class='text-danger'>Nemáte oprávnenie pridať administrátora!</h4>\";\r\n                }\r\n                else{\r\n\r\n\r\n                    $user_function = $_POST['user_function'];\r\n                    $user_image = $_FILES['user_image']['name'];\r\n                    $user_image_temp = $_FILES['user_image']['tmp_name'];\r\n\r\n                    move_uploaded_file($user_image_temp, \"../images/ludia/$user_image\");\r\n                    if(empty($user_image)){\r\n\r\n                        try{\r\n                            include 'includes/db.php';\r\n                            $query = \"SELECT * FROM users WHERE user_id = $user_id \";\r\n\r\n\r\n                            $send_info = $connection->prepare($query);\r\n\r\n                            $send_info->execute();\r\n\r\n                            while ($row = $send_info->fetch(PDO::FETCH_ASSOC)) {\r\n                                $user_image = $row['user_image'];\r\n                            }\r\n\r\n                        }catch (Exception $e){\r\n                            echo $e;\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n\r\n\r\n\r\n\r\n                    try{\r\n                        include \"includes/db.php\";\r\n\r\n\r\n                        $query = \"UPDATE users SET \";\r\n\r\n                        $query .= \"user_email = :user_email, \";\r\n                        $query .= \"user_name = :user_name, \";\r\n                        $query .= \"user_lastname = :user_lastname, \";\r\n                        $query .= \"user_titul = :user_titul, \";\r\n                        $query .= \"user_role = :user_role, \";\r\n                        $query .= \"user_function = :user_function, \";\r\n                        $query .= \"user_password = :user_password, \";\r\n                        $query .= \"user_image = :user_image \";\r\n                        $query .= \"WHERE user_id=$user_id \";\r\n\r\n                        $send_info = $connection->prepare($query);\r\n\r\n                        $send_info->bindParam(':user_email', $user_email);\r\n                        $send_info->bindParam(':user_name', $user_name);\r\n                        $send_info->bindParam(':user_password', $user_password);\r\n                        $send_info->bindParam(':user_role', $user_role);\r\n                        $send_info->bindParam(':user_function', $user_function);\r\n                        $send_info->bindParam(':user_image', $user_image);\r\n                        $send_info->bindParam(':user_titul', $user_titul);\r\n                        $send_info->bindParam(':user_lastname', $user_lastname);\r\n\r\n                        $send_info->execute();\r\n                        echo \"<h3 class='text-success'>Užívateľ $user_name bol aktualizovaný!</h3>\";\r\n\r\n                        // LOG\r\n                        include \"includes/add_log.php\";\r\n                        $logAction = \"Aktualizoval používateľa \" . $user_name;\r\n                        createLog($connection, $logAction, \"používatelia\");\r\n                    }\r\n                    catch (Exception $e){\r\n                        echo $e;\r\n                    }\r\n\r\n\r\n                    if($_SESSION['user_id'] == $user_id){\r\n\r\n                        $_SESSION['user_email'] = $user_email;\r\n                        $_SESSION['user_name'] = $user_name;\r\n                        $_SESSION['user_lastname'] = $user_lastname;\r\n                        $_SESSION['user_role'] = $user_role;\r\n                        $_SESSION['user_function'] = $user_function;\r\n                        $_SESSION['user_image'] = $user_image;\r\n\r\n                        header('refresh: 5');\r\n                    }\r\n\r\n                }\r\n\r\n            } // END OF 'IF USER DIDNT ENTER PASSWORD IN EDIT FORMULAR'\r\n\r\n            //IF PASSWORDS DONT MATCH\r\n            else {\r\n                echo \"<h3 class='text-danger'>Heslá sa nezhodujú</h3>\";\r\n            }\r\n\r\n\r\n\r\n        }\r\n    }\r\n        else{\r\n            header('Location: index.php');\r\n        }\r\n}\r\n\r\n?>\r\n\r\n\r\n\r\n<h2>Upraviť užívateľa</h2>\r\n<div class=\"col-md-6 col-sm-12\">\r\n    <form action=\"\" method=\"post\" enctype=\"multipart/form-data\" class=\"my-2\">\r\n        <div class=\"form-group\">\r\n            <label for=\"user_titul\">Titul: </label>\r\n            <input type=\"text\" class=\"form-control text-right\" id=\"user_titul\" placeholder=\"Zadajte titul\" name=\"user_titul\" style=\"width:20%;\" value=\"<?php echo $user_titul;?>\" autocomplete=\"off\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label for=\"user_name\">Meno: <span class=\"text-danger\">(required)</span> </label>\r\n            <input type=\"text\" class=\"form-control\" id=\"user_name\" placeholder=\"Zadajte meno užívateľa\" name=\"user_name\" value=\"<?php echo $user_name;?>\" required autocomplete=\"off\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label for=\"user_lastname\">Priezvisko: <span class=\"text-danger\">(required)</span></label>\r\n            <input type=\"text\" class=\"form-control\" id=\"user_lastname\" placeholder=\"Zadajte priezvisko užívateľa\" name=\"user_lastname\" value=\"<?php echo $user_lastname;?>\" required autocomplete=\"off\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label for=\"user_email\">Email: <span class=\"text-danger\">(required)</span></label>\r\n            <input type=\"email\" class=\"form-control\" id=\"user_email\" placeholder=\"Zadajte email užívateľa\" name=\"user_email\" value=\"<?php echo $user_email;?>\" required autocomplete=\"off\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label for=\"user_password\">Heslo: <span class=\"text-danger\">(required) min. 5 znakov</span></label>\r\n            <input type=\"password\" class=\"form-control\" id=\"user_password\" placeholder=\"Zadajte heslo užívateľa\" name=\"user_password\" minlength=\"5\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label for=\"user_password_confirm\">Zopakovať heslo: <span class=\"text-danger\">(required)</span></label>\r\n            <input type=\"password\" class=\"form-control\" id=\"user_password_confirm\" placeholder=\"Zopakujte heslo užívateľa\" name=\"user_password_confirm\">\r\n        </div>\r\n        <div class=\"form-group mt-3\">\r\n            <label for=\"user_image\">Obrázok: <span class=\"text-danger\">(do 10MB!)</span></label>\r\n            <input type=\"file\" class=\"form-control-file\" id=\"user_image\" name=\"user_image\">\r\n            <img src='../images/ludia/<?php echo $user_image;?>' alt='image' width=\"100px\">\r\n        </div>\r\n        <div class=\"form-group mt-3\">\r\n            <label for=\"user_function\">Funkcia:</label>\r\n            <input type=\"text\" class=\"form-control\" id=\"user_function\" placeholder=\"Zadajte funkciu užívateľa\" name=\"user_function\" aria-describedby=\"user_function\" value=\"<?php echo $user_function;?>\"  autocomplete=\"off\">\r\n            <small id=\"user_function\" class=\"form-text text-muted\">Napríklad: <span class=\"text-info\">Predsedníčka spolku, Tajomník, Umelecký vedúci a pod.</span></small>\r\n        </div>\r\n\r\n        Rola: <span class=\"text-danger\">(required)</span>\r\n        <div class=\"form-check\">\r\n\r\n            <input type=\"checkbox\" class=\"form-check-input\" name=\"user_role[]\" value=\"admin\" id=\"admin\"  tabIndex=\"1\" onClick=\"ckChange(this)\"\r\n                <?php\r\n                if(strpos($user_role, 'admin')){\r\n                    echo ' checked';\r\n                }\r\n                else {\r\n                    echo ' disabled ';\r\n                }\r\n                ?>\r\n             >\r\n            <label class=\"form-check-label\" for=\"admin\">Admin</label>\r\n\r\n        </div>\r\n        <div class=\"form-check\">\r\n            <input type=\"checkbox\" class=\"form-check-input\" name=\"user_role[]\" value=\"moderator\" id=\"moderator\" tabIndex=\"1\" onClick=\"ckChange(this)\"\r\n                <?php\r\n                if(strpos($user_role, 'moderator')){\r\n                    echo ' checked';\r\n                }\r\n                else if (strpos($user_role, 'admin') || strpos($user_role, 'uzivatel')) {\r\n                    echo ' disabled ';\r\n                }\r\n                ?>\r\n            >\r\n            <label class=\"form-check-label\" for=\"moderator\">Moderátor</label>\r\n\r\n        </div>\r\n        <div class=\"form-check\">\r\n            <input type=\"checkbox\" class=\"form-check-input\" name=\"user_role[]\" value=\"lektor\" id=\"lektor\" tabIndex=\"1\" onClick=\"ckChange(this)\"\r\n                <?php\r\n                if(strpos($user_role, 'lektor')){\r\n                    echo ' checked';\r\n                }\r\n                else if (strpos($user_role, 'admin') || strpos($user_role, 'uzivatel')) {\r\n                    echo ' disabled ';\r\n                }\r\n                ?>\r\n            >\r\n            <label class=\"form-check-label\" for=\"lektor\">Lektor</label>\r\n\r\n        </div>\r\n        <div class=\"form-check\">\r\n            <input type=\"checkbox\" class=\"form-check-input\" name=\"user_role[]\" value=\"uzivatel\" id=\"uzivatel\" tabIndex=\"1\" onClick=\"ckChange(this)\"\r\n                <?php\r\n                if(strpos($user_role, 'uzivatel')){\r\n                    echo ' checked';\r\n                }\r\n                else {\r\n                    echo ' disabled ';\r\n                }\r\n                ?>\r\n            >\r\n            <label class=\"form-check-label\" for=\"uzivatel\">Užívateľ</label>\r\n\r\n\r\n        </div>\r\n\r\n        <input type=\"submit\" class=\"btn btn-primary my-1 float-right\" style=\"width: 50%;\" name=\"edit_user\" value=\"Upraviť\">\r\n\r\n\r\n\r\n    </form>\r\n</div>\r\n\r\n<script>\r\n    function ckChange(ckType){\r\n        var ckName = document.getElementsByName(ckType.name);\r\n        var checked = document.getElementById(ckType.id);\r\n\r\n\r\n\r\n        if (document.getElementById(\"admin\").checked) {\r\n            for(var i=0; i < ckName.length; i++){\r\n\r\n                if(!ckName[i].checked){\r\n                    ckName[i].disabled = true;\r\n                }else{\r\n                    ckName[i].disabled = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        else if (document.getElementById(\"moderator\").checked) {\r\n            document.getElementById(\"admin\").disabled = true\r\n            document.getElementById(\"uzivatel\").disabled = true\r\n        }\r\n\r\n        else if (document.getElementById(\"lektor\").checked) {\r\n            document.getElementById(\"admin\").disabled = true\r\n            document.getElementById(\"uzivatel\").disabled = true\r\n        }\r\n\r\n        else if (document.getElementById(\"uzivatel\").checked) {\r\n            for(var i=0; i < ckName.length; i++){\r\n\r\n                if(!ckName[i].checked){\r\n                    ckName[i].disabled = true;\r\n                }else{\r\n                    ckName[i].disabled = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        else {\r\n            for(var i=0; i < ckName.length; i++){\r\n                ckName[i].disabled = false;\r\n            }\r\n        }\r\n\r\n    }\r\n</script>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- dashboard/includes/edit_user.php	(revision d85b7fa12db8d13f2f23fa4b471af7fa85b2e855)
+++ dashboard/includes/edit_user.php	(date 1605215218764)
@@ -1,5 +1,6 @@
 <?php
 
+
 if (isset($_GET['edit'])) {
     $user_id = $_GET['edit'];
 
@@ -57,6 +58,11 @@
                 }
                 $user_role = substr($user_role, 0, -1);
 
+                if (strpos($_SESSION['user_role'],'uzivatel')){
+                    $user_role = 'uzivatel';
+
+                }
+
                 if (strpos($user_role, 'admin')&&strpos($_SESSION['user_role'],'moderator')){
 
                     echo "<h4  class='text-danger'>Nemáte oprávnenie pridať administrátora!</h4>";
@@ -159,13 +165,19 @@
                 $user_lastname = $_POST['user_lastname'];
                 $user_titul = $_POST['user_titul'];
 
-                $user_role_array = $_POST['user_role'];
+                if (strpos($_SESSION['user_role'], 'uzivatel')){
+                    $user_role = 'uzivatel';
+                }
+                else{
+
+                    $user_role_array = $_POST['user_role'];
 
-                $user_role = '';
-                foreach ($user_role_array as $array=>$value) {
-                    $user_role .= " $value,";
-                }
-                $user_role = substr($user_role, 0, -1);
+                    $user_role = '';
+                    foreach ($user_role_array as $array=>$value) {
+                        $user_role .= " $value,";
+                    }
+                    $user_role = substr($user_role, 0, -1);
+                }
 
                 if (strpos($user_role, 'admin')&&strpos($_SESSION['user_role'],'moderator')){
 
@@ -318,6 +330,9 @@
         </div>
 
         Rola: <span class="text-danger">(required)</span>
+        <?php
+        if (strpos($_SESSION['user_role'], 'admin')){
+        ?>
         <div class="form-check">
 
             <input type="checkbox" class="form-check-input" name="user_role[]" value="admin" id="admin"  tabIndex="1" onClick="ckChange(this)"
@@ -333,6 +348,11 @@
             <label class="form-check-label" for="admin">Admin</label>
 
         </div>
+        <?php
+
+        }
+        if (strpos($_SESSION['user_role'], 'admin') || strpos($_SESSION['user_role'], 'moderator')){
+        ?>
         <div class="form-check">
             <input type="checkbox" class="form-check-input" name="user_role[]" value="moderator" id="moderator" tabIndex="1" onClick="ckChange(this)"
                 <?php
@@ -347,6 +367,11 @@
             <label class="form-check-label" for="moderator">Moderátor</label>
 
         </div>
+        <?php
+
+        }
+        if (!strpos($_SESSION['user_role'], 'uzivatel')){
+        ?>
         <div class="form-check">
             <input type="checkbox" class="form-check-input" name="user_role[]" value="lektor" id="lektor" tabIndex="1" onClick="ckChange(this)"
                 <?php
@@ -361,6 +386,9 @@
             <label class="form-check-label" for="lektor">Lektor</label>
 
         </div>
+            <?php
+            }
+ ?>
         <div class="form-check">
             <input type="checkbox" class="form-check-input" name="user_role[]" value="uzivatel" id="uzivatel" tabIndex="1" onClick="ckChange(this)"
                 <?php
Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_6_2020_2_04_PM__Default_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_11_6_2020_2_04_PM__Default_.xml	(revision d85b7fa12db8d13f2f23fa4b471af7fa85b2e855)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_11_6_2020_2_04_PM__Default_.xml	(revision d85b7fa12db8d13f2f23fa4b471af7fa85b2e855)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_11_6_2020_2_04_PM_[Default]" date="1604667879319" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_11_6_2020_2_04_PM_[Default]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 11/6/2020 2:04 PM [Default]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_6_2020_2_04_PM_[Default]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_11_6_2020_2_04_PM_[Default]/shelved.patch	(revision d85b7fa12db8d13f2f23fa4b471af7fa85b2e855)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_11_6_2020_2_04_PM_[Default]/shelved.patch	(revision d85b7fa12db8d13f2f23fa4b471af7fa85b2e855)
@@ -1,40 +0,0 @@
-Index: .idea/workspace.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"f1d32e45-67c6-4b3c-bd10-0fa8c8bb1feb\" name=\"Default\" comment=\"\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/vcs.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/vcs.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/clanok.php\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/clanok.php\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/includes/articleHeader.php\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/includes/articleHeader.php\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"ComposerSettings\">\r\n    <execution />\r\n  </component>\r\n  <component name=\"DatabaseView\">\r\n    <option name=\"SHOW_INTERMEDIATE\" value=\"true\" />\r\n    <option name=\"GROUP_DATA_SOURCES\" value=\"true\" />\r\n    <option name=\"GROUP_SCHEMA\" value=\"true\" />\r\n    <option name=\"GROUP_CONTENTS\" value=\"false\" />\r\n    <option name=\"SORT_POSITIONED\" value=\"false\" />\r\n    <option name=\"SHOW_EMPTY_GROUPS\" value=\"false\" />\r\n    <option name=\"AUTO_SCROLL_FROM_SOURCE\" value=\"false\" />\r\n    <option name=\"HIDDEN_KINDS\">\r\n      <set />\r\n    </option>\r\n    <expand />\r\n    <select />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"HTML File\" />\r\n        <option value=\"JavaScript File\" />\r\n        <option value=\"CSS File\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"1jn6raO8pfPq8qfVNaIK4qunHkQ\" />\r\n  <component name=\"ProjectLevelVcsManager\" settingsEditedManually=\"true\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">\r\n    <property name=\"DefaultHtmlFileTemplate\" value=\"HTML File\" />\r\n    <property name=\"HbShouldOpenHtmlAsHb\" value=\"\" />\r\n    <property name=\"WebServerToolWindowFactoryState\" value=\"false\" />\r\n    <property name=\"last_opened_file_path\" value=\"$PROJECT_DIR$\" />\r\n    <property name=\"list.type.of.created.stylesheet\" value=\"CSS\" />\r\n    <property name=\"settings.editor.selected.configurable\" value=\"preferences.general\" />\r\n    <property name=\"vue.rearranger.settings.migration\" value=\"true\" />\r\n  </component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"MoveFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\xampp\\htdocs\\web\\includes\" />\r\n      <recent name=\"C:\\xampp\\htdocs\\web\\links\" />\r\n      <recent name=\"C:\\xampp\\htdocs\\web\" />\r\n      <recent name=\"G:\\TELEKOM\\3rocnik\\TMW\\Semestralka\\web\\images\" />\r\n    </key>\r\n    <key name=\"CopyFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\xampp\\htdocs\\web\\dashboard\" />\r\n      <recent name=\"C:\\xampp\\htdocs\\web\\dashboard\\includes\" />\r\n      <recent name=\"C:\\xampp\\htdocs\\web\" />\r\n      <recent name=\"G:\\TELEKOM\\3rocnik\\TMW\\Semestralka\\web\" />\r\n      <recent name=\"G:\\TELEKOM\\3rocnik\\TMW\\Semestralka\\web\\articles\\maticny-program\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"SvnConfiguration\">\r\n    <configuration />\r\n  </component>\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"f1d32e45-67c6-4b3c-bd10-0fa8c8bb1feb\" name=\"Default\" comment=\"\" />\r\n      <created>1511120058825</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1511120058825</updated>\r\n      <workItem from=\"1511120060393\" duration=\"7631000\" />\r\n      <workItem from=\"1511177315779\" duration=\"11067000\" />\r\n      <workItem from=\"1511273193624\" duration=\"4518000\" />\r\n      <workItem from=\"1511286693184\" duration=\"2226000\" />\r\n      <workItem from=\"1511352199287\" duration=\"24900000\" />\r\n      <workItem from=\"1511441999014\" duration=\"3170000\" />\r\n      <workItem from=\"1511522076807\" duration=\"2772000\" />\r\n      <workItem from=\"1511706922219\" duration=\"1298000\" />\r\n      <workItem from=\"1511808442072\" duration=\"629000\" />\r\n      <workItem from=\"1511959673394\" duration=\"942000\" />\r\n      <workItem from=\"1512562379581\" duration=\"955000\" />\r\n      <workItem from=\"1513254379629\" duration=\"1464000\" />\r\n      <workItem from=\"1513685366024\" duration=\"759000\" />\r\n      <workItem from=\"1531813312712\" duration=\"2384000\" />\r\n      <workItem from=\"1532676379466\" duration=\"2538000\" />\r\n      <workItem from=\"1536598727365\" duration=\"6969000\" />\r\n      <workItem from=\"1536754285825\" duration=\"2799000\" />\r\n      <workItem from=\"1538398286708\" duration=\"94000\" />\r\n      <workItem from=\"1538398693865\" duration=\"613000\" />\r\n      <workItem from=\"1538657135755\" duration=\"12229000\" />\r\n      <workItem from=\"1538734824908\" duration=\"13806000\" />\r\n      <workItem from=\"1538916766433\" duration=\"1190000\" />\r\n      <workItem from=\"1539634635868\" duration=\"52000\" />\r\n      <workItem from=\"1539934402132\" duration=\"4425000\" />\r\n      <workItem from=\"1539967417992\" duration=\"3067000\" />\r\n      <workItem from=\"1540024604004\" duration=\"44000\" />\r\n      <workItem from=\"1540026275213\" duration=\"1574000\" />\r\n      <workItem from=\"1540202111467\" duration=\"52000\" />\r\n      <workItem from=\"1540814942970\" duration=\"4810000\" />\r\n      <workItem from=\"1540899512612\" duration=\"1153000\" />\r\n      <workItem from=\"1541148159283\" duration=\"21000\" />\r\n      <workItem from=\"1541167252749\" duration=\"585000\" />\r\n      <workItem from=\"1541574561975\" duration=\"13000\" />\r\n      <workItem from=\"1541590469363\" duration=\"111000\" />\r\n      <workItem from=\"1541705439054\" duration=\"1229000\" />\r\n      <workItem from=\"1541710514213\" duration=\"351000\" />\r\n      <workItem from=\"1541756103478\" duration=\"1610000\" />\r\n      <workItem from=\"1541843345146\" duration=\"609000\" />\r\n      <workItem from=\"1541856160908\" duration=\"613000\" />\r\n      <workItem from=\"1542820218382\" duration=\"7627000\" />\r\n      <workItem from=\"1542897233076\" duration=\"8327000\" />\r\n      <workItem from=\"1542980938963\" duration=\"598000\" />\r\n      <workItem from=\"1543163927151\" duration=\"269000\" />\r\n      <workItem from=\"1543168965022\" duration=\"18718000\" />\r\n      <workItem from=\"1543233591078\" duration=\"10368000\" />\r\n      <workItem from=\"1543264665921\" duration=\"7926000\" />\r\n      <workItem from=\"1543272723691\" duration=\"90000\" />\r\n      <workItem from=\"1543347596570\" duration=\"583000\" />\r\n      <workItem from=\"1543430532904\" duration=\"6578000\" />\r\n      <workItem from=\"1543584828562\" duration=\"12035000\" />\r\n      <workItem from=\"1543927671176\" duration=\"2908000\" />\r\n      <workItem from=\"1543993277806\" duration=\"899000\" />\r\n      <workItem from=\"1543995673429\" duration=\"189000\" />\r\n      <workItem from=\"1543995985592\" duration=\"3154000\" />\r\n      <workItem from=\"1544028939407\" duration=\"17635000\" />\r\n      <workItem from=\"1544114694859\" duration=\"14918000\" />\r\n      <workItem from=\"1544182761846\" duration=\"10533000\" />\r\n      <workItem from=\"1544603853327\" duration=\"2216000\" />\r\n      <workItem from=\"1544624052003\" duration=\"2002000\" />\r\n      <workItem from=\"1544795742731\" duration=\"598000\" />\r\n      <workItem from=\"1544875740643\" duration=\"2227000\" />\r\n      <workItem from=\"1545055445884\" duration=\"1519000\" />\r\n      <workItem from=\"1545396167828\" duration=\"1266000\" />\r\n      <workItem from=\"1545928370425\" duration=\"236000\" />\r\n      <workItem from=\"1546877524954\" duration=\"18000\" />\r\n      <workItem from=\"1573489114174\" duration=\"361000\" />\r\n      <workItem from=\"1594483856502\" duration=\"177000\" />\r\n      <workItem from=\"1594484203507\" duration=\"530000\" />\r\n      <workItem from=\"1604427713136\" duration=\"3524000\" />\r\n      <workItem from=\"1604431425840\" duration=\"47000\" />\r\n      <workItem from=\"1604665203327\" duration=\"1722000\" />\r\n    </task>\r\n    <servers />\r\n  </component>\r\n  <component name=\"TodoView\">\r\n    <todo-panel id=\"selected-file\">\r\n      <is-autoscroll-to-source value=\"true\" />\r\n    </todo-panel>\r\n    <todo-panel id=\"all\">\r\n      <are-packages-shown value=\"true\" />\r\n      <is-autoscroll-to-source value=\"true\" />\r\n    </todo-panel>\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"WindowStateProjectService\">\r\n    <state x=\"-1280\" y=\"256\" key=\"#com.intellij.openapi.updateSettings.impl.PluginUpdateInfoDialog\" timestamp=\"1604430719868\">\r\n      <screen x=\"-1920\" y=\"0\" width=\"1920\" height=\"1040\" />\r\n    </state>\r\n    <state x=\"-1280\" y=\"256\" key=\"#com.intellij.openapi.updateSettings.impl.PluginUpdateInfoDialog/0.0.1600.860/-1920.0.1920.1040@-1920.0.1920.1040\" timestamp=\"1604430719868\" />\r\n    <state x=\"-1126\" y=\"443\" key=\"NewPhpFileDialog\" timestamp=\"1604428966832\">\r\n      <screen x=\"-1920\" y=\"0\" width=\"1920\" height=\"1040\" />\r\n    </state>\r\n    <state x=\"-1126\" y=\"443\" key=\"NewPhpFileDialog/0.0.1600.860/-1920.0.1920.1040@-1920.0.1920.1040\" timestamp=\"1604428966832\" />\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- .idea/workspace.xml	(revision ca0719d824e7cda647177219deabb35b3f679f1c)
-+++ .idea/workspace.xml	(date 1604667766319)
-@@ -1,12 +1,7 @@
- <?xml version="1.0" encoding="UTF-8"?>
- <project version="4">
-   <component name="ChangeListManager">
--    <list default="true" id="f1d32e45-67c6-4b3c-bd10-0fa8c8bb1feb" name="Default" comment="">
--      <change beforePath="$PROJECT_DIR$/.idea/vcs.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/vcs.xml" afterDir="false" />
--      <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
--      <change beforePath="$PROJECT_DIR$/clanok.php" beforeDir="false" afterPath="$PROJECT_DIR$/clanok.php" afterDir="false" />
--      <change beforePath="$PROJECT_DIR$/includes/articleHeader.php" beforeDir="false" afterPath="$PROJECT_DIR$/includes/articleHeader.php" afterDir="false" />
--    </list>
-+    <list default="true" id="f1d32e45-67c6-4b3c-bd10-0fa8c8bb1feb" name="Default" comment="" />
-     <option name="SHOW_DIALOG" value="false" />
-     <option name="HIGHLIGHT_CONFLICTS" value="true" />
-     <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
-@@ -40,6 +35,7 @@
-   </component>
-   <component name="Git.Settings">
-     <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$" />
-+    <option name="ROOT_SYNC" value="DONT_SYNC" />
-   </component>
-   <component name="ProjectId" id="1jn6raO8pfPq8qfVNaIK4qunHkQ" />
-   <component name="ProjectLevelVcsManager" settingsEditedManually="true" />
-@@ -152,7 +148,7 @@
-       <workItem from="1594484203507" duration="530000" />
-       <workItem from="1604427713136" duration="3524000" />
-       <workItem from="1604431425840" duration="47000" />
--      <workItem from="1604665203327" duration="1722000" />
-+      <workItem from="1604665203327" duration="2540000" />
-     </task>
-     <servers />
-   </component>
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"BranchesTreeState\">\r\n    <expand>\r\n      <path>\r\n        <item name=\"ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n        <item name=\"LOCAL_ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n      </path>\r\n      <path>\r\n        <item name=\"ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n        <item name=\"REMOTE_ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n      </path>\r\n      <path>\r\n        <item name=\"ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n        <item name=\"REMOTE_ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n        <item name=\"GROUP_NODE:origin\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n      </path>\r\n    </expand>\r\n    <select />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"f1d32e45-67c6-4b3c-bd10-0fa8c8bb1feb\" name=\"Default\" comment=\"pridane logy\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/includes/footer.php\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/includes/footer.php\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/o-nas.php\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/o-nas.php\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"ComposerSettings\">\r\n    <execution />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"HTML File\" />\r\n        <option value=\"JavaScript File\" />\r\n        <option value=\"CSS File\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"1jn6raO8pfPq8qfVNaIK4qunHkQ\" />\r\n  <component name=\"ProjectLevelVcsManager\" settingsEditedManually=\"true\">\r\n    <ConfirmationsSetting value=\"2\" id=\"Add\" />\r\n  </component>\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">\r\n    <property name=\"DefaultHtmlFileTemplate\" value=\"HTML File\" />\r\n    <property name=\"HbShouldOpenHtmlAsHb\" value=\"\" />\r\n    <property name=\"RunOnceActivity.OpenProjectViewOnStart\" value=\"true\" />\r\n    <property name=\"WebServerToolWindowFactoryState\" value=\"false\" />\r\n    <property name=\"last_opened_file_path\" value=\"$PROJECT_DIR$\" />\r\n    <property name=\"list.type.of.created.stylesheet\" value=\"CSS\" />\r\n    <property name=\"node.js.path.for.package.tslint\" value=\"project\" />\r\n    <property name=\"node.js.selected.package.tslint\" value=\"(autodetect)\" />\r\n    <property name=\"settings.editor.selected.configurable\" value=\"preferences.general\" />\r\n    <property name=\"vue.rearranger.settings.migration\" value=\"true\" />\r\n  </component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"MoveFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\xampp\\htdocs\\web\\includes\" />\r\n      <recent name=\"C:\\xampp\\htdocs\\web\\links\" />\r\n      <recent name=\"C:\\xampp\\htdocs\\web\" />\r\n      <recent name=\"G:\\TELEKOM\\3rocnik\\TMW\\Semestralka\\web\\images\" />\r\n    </key>\r\n    <key name=\"CopyFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\xampp\\htdocs\\web\\dashboard\" />\r\n      <recent name=\"C:\\xampp\\htdocs\\web\\dashboard\\includes\" />\r\n      <recent name=\"C:\\xampp\\htdocs\\web\" />\r\n      <recent name=\"G:\\TELEKOM\\3rocnik\\TMW\\Semestralka\\web\" />\r\n      <recent name=\"G:\\TELEKOM\\3rocnik\\TMW\\Semestralka\\web\\articles\\maticny-program\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"SvnConfiguration\">\r\n    <configuration />\r\n  </component>\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"f1d32e45-67c6-4b3c-bd10-0fa8c8bb1feb\" name=\"Default\" comment=\"\" />\r\n      <created>1511120058825</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1511120058825</updated>\r\n      <workItem from=\"1511120060393\" duration=\"7631000\" />\r\n      <workItem from=\"1511177315779\" duration=\"11067000\" />\r\n      <workItem from=\"1511273193624\" duration=\"4518000\" />\r\n      <workItem from=\"1511286693184\" duration=\"2226000\" />\r\n      <workItem from=\"1511352199287\" duration=\"24900000\" />\r\n      <workItem from=\"1511441999014\" duration=\"3170000\" />\r\n      <workItem from=\"1511522076807\" duration=\"2772000\" />\r\n      <workItem from=\"1511706922219\" duration=\"1298000\" />\r\n      <workItem from=\"1511808442072\" duration=\"629000\" />\r\n      <workItem from=\"1511959673394\" duration=\"942000\" />\r\n      <workItem from=\"1512562379581\" duration=\"955000\" />\r\n      <workItem from=\"1513254379629\" duration=\"1464000\" />\r\n      <workItem from=\"1513685366024\" duration=\"759000\" />\r\n      <workItem from=\"1531813312712\" duration=\"2384000\" />\r\n      <workItem from=\"1532676379466\" duration=\"2538000\" />\r\n      <workItem from=\"1536598727365\" duration=\"6969000\" />\r\n      <workItem from=\"1536754285825\" duration=\"2799000\" />\r\n      <workItem from=\"1538398286708\" duration=\"94000\" />\r\n      <workItem from=\"1538398693865\" duration=\"613000\" />\r\n      <workItem from=\"1538657135755\" duration=\"12229000\" />\r\n      <workItem from=\"1538734824908\" duration=\"13806000\" />\r\n      <workItem from=\"1538916766433\" duration=\"1190000\" />\r\n      <workItem from=\"1539634635868\" duration=\"52000\" />\r\n      <workItem from=\"1539934402132\" duration=\"4425000\" />\r\n      <workItem from=\"1539967417992\" duration=\"3067000\" />\r\n      <workItem from=\"1540024604004\" duration=\"44000\" />\r\n      <workItem from=\"1540026275213\" duration=\"1574000\" />\r\n      <workItem from=\"1540202111467\" duration=\"52000\" />\r\n      <workItem from=\"1540814942970\" duration=\"4810000\" />\r\n      <workItem from=\"1540899512612\" duration=\"1153000\" />\r\n      <workItem from=\"1541148159283\" duration=\"21000\" />\r\n      <workItem from=\"1541167252749\" duration=\"585000\" />\r\n      <workItem from=\"1541574561975\" duration=\"13000\" />\r\n      <workItem from=\"1541590469363\" duration=\"111000\" />\r\n      <workItem from=\"1541705439054\" duration=\"1229000\" />\r\n      <workItem from=\"1541710514213\" duration=\"351000\" />\r\n      <workItem from=\"1541756103478\" duration=\"1610000\" />\r\n      <workItem from=\"1541843345146\" duration=\"609000\" />\r\n      <workItem from=\"1541856160908\" duration=\"613000\" />\r\n      <workItem from=\"1542820218382\" duration=\"7627000\" />\r\n      <workItem from=\"1542897233076\" duration=\"8327000\" />\r\n      <workItem from=\"1542980938963\" duration=\"598000\" />\r\n      <workItem from=\"1543163927151\" duration=\"269000\" />\r\n      <workItem from=\"1543168965022\" duration=\"18718000\" />\r\n      <workItem from=\"1543233591078\" duration=\"10368000\" />\r\n      <workItem from=\"1543264665921\" duration=\"7926000\" />\r\n      <workItem from=\"1543272723691\" duration=\"90000\" />\r\n      <workItem from=\"1543347596570\" duration=\"583000\" />\r\n      <workItem from=\"1543430532904\" duration=\"6578000\" />\r\n      <workItem from=\"1543584828562\" duration=\"12035000\" />\r\n      <workItem from=\"1543927671176\" duration=\"2908000\" />\r\n      <workItem from=\"1543993277806\" duration=\"899000\" />\r\n      <workItem from=\"1543995673429\" duration=\"189000\" />\r\n      <workItem from=\"1543995985592\" duration=\"3154000\" />\r\n      <workItem from=\"1544028939407\" duration=\"17635000\" />\r\n      <workItem from=\"1544114694859\" duration=\"14918000\" />\r\n      <workItem from=\"1544182761846\" duration=\"10533000\" />\r\n      <workItem from=\"1544603853327\" duration=\"2216000\" />\r\n      <workItem from=\"1544624052003\" duration=\"2002000\" />\r\n      <workItem from=\"1544795742731\" duration=\"598000\" />\r\n      <workItem from=\"1544875740643\" duration=\"2227000\" />\r\n      <workItem from=\"1545055445884\" duration=\"1519000\" />\r\n      <workItem from=\"1545396167828\" duration=\"1266000\" />\r\n      <workItem from=\"1545928370425\" duration=\"236000\" />\r\n      <workItem from=\"1546877524954\" duration=\"18000\" />\r\n      <workItem from=\"1573489114174\" duration=\"361000\" />\r\n      <workItem from=\"1594483856502\" duration=\"177000\" />\r\n      <workItem from=\"1594484203507\" duration=\"530000\" />\r\n      <workItem from=\"1604427713136\" duration=\"3524000\" />\r\n      <workItem from=\"1604431425840\" duration=\"47000\" />\r\n      <workItem from=\"1604665203327\" duration=\"1722000\" />\r\n      <workItem from=\"1604667420392\" duration=\"276000\" />\r\n      <workItem from=\"1605208801932\" duration=\"485000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"pridane logy\">\r\n      <created>1604693497462</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1604693497462</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"2\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State />\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n    <option name=\"oldMeFiltersMigrated\" value=\"true\" />\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"pridane logy\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"pridane logy\" />\r\n  </component>\r\n  <component name=\"WindowStateProjectService\">\r\n    <state x=\"-1280\" y=\"256\" key=\"#com.intellij.openapi.updateSettings.impl.PluginUpdateInfoDialog\" timestamp=\"1604430719868\">\r\n      <screen x=\"-1920\" y=\"0\" width=\"1920\" height=\"1040\" />\r\n    </state>\r\n    <state x=\"-1280\" y=\"256\" key=\"#com.intellij.openapi.updateSettings.impl.PluginUpdateInfoDialog/0.0.1600.860/-1920.0.1920.1040@-1920.0.1920.1040\" timestamp=\"1604430719868\" />\r\n    <state x=\"635\" y=\"351\" key=\"NewPhpFileDialog\" timestamp=\"1604689910941\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"635\" y=\"351\" key=\"NewPhpFileDialog/0.0.1536.824/1920.0.1536.824@0.0.1536.824\" timestamp=\"1604689910941\" />\r\n    <state x=\"2555\" y=\"351\" key=\"NewPhpFileDialog/0.0.1536.824/1920.0.1536.824@1920.0.1536.824\" timestamp=\"1604686541252\" />\r\n    <state x=\"-1126\" y=\"443\" key=\"NewPhpFileDialog/0.0.1600.860/-1920.0.1920.1040@-1920.0.1920.1040\" timestamp=\"1604428966832\" />\r\n    <state x=\"361\" y=\"145\" key=\"Vcs.Push.Dialog.v2\" timestamp=\"1604693505795\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"361\" y=\"145\" key=\"Vcs.Push.Dialog.v2/0.0.1536.824/1920.0.1536.824@0.0.1536.824\" timestamp=\"1604693505795\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/workspace.xml	(revision d85b7fa12db8d13f2f23fa4b471af7fa85b2e855)
+++ .idea/workspace.xml	(date 1605215320014)
@@ -21,8 +21,9 @@
   <component name="ChangeListManager">
     <list default="true" id="f1d32e45-67c6-4b3c-bd10-0fa8c8bb1feb" name="Default" comment="pridane logy">
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/includes/footer.php" beforeDir="false" afterPath="$PROJECT_DIR$/includes/footer.php" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/o-nas.php" beforeDir="false" afterPath="$PROJECT_DIR$/o-nas.php" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/clanok.php" beforeDir="false" afterPath="$PROJECT_DIR$/clanok.php" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/dashboard/includes/edit_user.php" beforeDir="false" afterPath="$PROJECT_DIR$/dashboard/includes/edit_user.php" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/dashboard/index.php" beforeDir="false" afterPath="$PROJECT_DIR$/dashboard/index.php" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -163,6 +164,7 @@
       <workItem from="1604665203327" duration="1722000" />
       <workItem from="1604667420392" duration="276000" />
       <workItem from="1605208801932" duration="485000" />
+      <workItem from="1605211896772" duration="3405000" />
     </task>
     <task id="LOCAL-00001" summary="pridane logy">
       <created>1604693497462</created>
Index: dashboard/index.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php ob_start(); ?>\r\n<?php\r\ninclude \"includes/header.php\"; //INCLUDE HEADER\r\n?>\r\n<!--    <!--MOBILE NAVBAR-->\r\n    <?php\r\n    include \"includes/mobile-navigation.php\"; //INCLUDE NAVIGATION FOR MOBILE\r\n    ?>\r\n\r\n\r\n    <!--LG SCREEN NAVBAR-->\r\n    <div class=\"col-md-10 col-sm-12 d-none d-md-inline\">\r\n\r\n\r\n    <a class=\"float-left text-light mt-2\" href=\"../index.php\" target=\"_blank\"><i class=\"fas fa-external-link-alt\"></i> Zobraziť stránku</a>\r\n<!--    <input class=\"form-control form-control-dark w-100\" type=\"text\" placeholder=\"Search\" aria-label=\"Search\">-->\r\n\r\n\r\n\r\n<!--        USER INFO-->\r\n\r\n        <?php\r\n        include 'includes/profile_dropdown.php';\r\n        ?>\r\n    </div><!--//LG SCREEN NAVBAR-->\r\n</nav>\r\n\r\n<div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n        <?php\r\n        include \"includes/navigation.php\";  //INCLUDE NAVIGATION\r\n        ?>\r\n\r\n        <main role=\"main\" class=\"col-md-9 ml-sm-auto col-lg-10 px-4\">\r\n            <?php\r\n            if (strpos($_SESSION['user_role'], 'admin')||strpos($_SESSION['user_role'], 'lektor')){\r\n\r\n                try{\r\n                    include 'includes/db.php';\r\n\r\n                    $query = \"SELECT * FROM posts WHERE post_status = 'draft'\";\r\n\r\n                    $send_info = $connection->prepare($query);\r\n\r\n                    $send_info->execute();\r\n                    $count = $send_info->rowCount();\r\n\r\n                    if ($count!==0){\r\n\r\n\r\n\r\n                        echo \"\r\n                \r\n            <div class=\\\"bg-danger my-5 p-3 shadow\\\" style=\\\"width: 90%;\\\">\r\n                <h4>\r\n                    <a href=\\\"posts.php\\\" class=\\\" text-white\\\"><i class=\\\"fas fa-bell\\\"></i> Nechválené články: $count</a></h4>\r\n\r\n            </div>\r\n                \r\n                \";\r\n                    }\r\n\r\n                }\r\n                catch (Exception $e){\r\n                    echo $e;\r\n                }\r\n\r\n\r\n            }\r\n            ?>\r\n            <div class=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\">\r\n                <h1 class=\"h2 text-muted\">Dashboard</h1>\r\n            </div>\r\n\r\n            <h2>Rýchly prístup</h2>\r\n            <div class=\"row pb-3 border-bottom\">\r\n            <div class=\"col-md-4 col-sm-12\">\r\n                <div class=\"card text-right\" style=\"width: 100%;\">\r\n                    <div class=\"card-body\">\r\n                        <h2 class=\"card-title\"><a href=\"posts.php\">\r\n                            <i class=\"far fa-sticky-note\"></i> Články <span class=\"badge badge-secondary\">\r\n                                    <?php\r\n                                    try {\r\n                                        include 'includes/db.php';\r\n\r\n\r\n                                        $query = \"SELECT * from posts \";\r\n\r\n                                        $send_info = $connection->prepare($query);\r\n\r\n                                        $send_info->execute();\r\n                                        $count = $send_info->rowCount();\r\n                                        echo $count;\r\n                                    }catch (Exception $e){\r\n                                        echo $e;\r\n                                    }\r\n                                    ?>\r\n                                </span></a>\r\n                        </h2>\r\n\r\n                        <a href=\"posts.php?source=add_post\" class=\"card-link\"><i class=\"fas fa-pencil-alt\"></i> Pridať článok</a>\r\n                        <a href=\"posts.php\" class=\"card-link\"><i class=\"fas fa-list-ul\"></i> Zobraziť všetky</a>\r\n                    </div>\r\n                </div>\r\n            </div><!--  // class=\"col-md-4\"   -->\r\n\r\n                <div class=\"col-md-4 col-sm-12\">\r\n                    <div class=\"card text-right\" style=\"width: 100%;\">\r\n                        <div class=\"card-body\">\r\n                            <h2 class=\"card-title\"><a href=\"events.php\">\r\n                                    <i class=\"far fa-calendar-alt\"></i> Podujatia <span class=\"badge badge-secondary\">\r\n                                    <?php\r\n                                    try {\r\n                                        include 'includes/db.php';\r\n\r\n\r\n                                        $query = \"SELECT * from events \";\r\n\r\n                                        $send_info = $connection->prepare($query);\r\n\r\n                                        $send_info->execute();\r\n                                        $count = $send_info->rowCount();\r\n                                        echo $count;\r\n                                    }catch (Exception $e){\r\n                                        echo $e;\r\n                                    }\r\n                                    ?></span></a>\r\n                            </h2>\r\n\r\n                            <?php\r\n                            if (isset($_SESSION['user_role'])){\r\n                                if (strpos($_SESSION['user_role'], 'uzivatel')){\r\n                                }\r\n                                else{\r\n\r\n                                    echo \"<a href=\\\"events.php?source=add_event\\\" class=\\\"card-link\\\"><i class=\\\"fas fa-pencil-alt\\\"></i> Pridať podujatie</a>\";\r\n                                }\r\n                            }\r\n                            ?>\r\n\r\n                            <a href=\"events.php\" class=\"card-link\"><i class=\"fas fa-list-ul\"></i> Zobraziť všetky</a>\r\n                        </div>\r\n                    </div>\r\n                </div><!--  // class=\"col-md-4\"   -->\r\n\r\n                <div class=\"col-md-4 col-sm-12\">\r\n                    <div class=\"card text-right\" style=\"width: 100%;\">\r\n                        <div class=\"card-body\">\r\n                            <h2 class=\"card-title\"><a href=\"users.php\">\r\n                                    <i class=\"fas fa-users\"></i> Užívatelia <span class=\"badge badge-secondary\"><?php\r\n                                        try {\r\n                                            include 'includes/db.php';\r\n\r\n\r\n                                            $query = \"SELECT * from users \";\r\n\r\n                                            $send_info = $connection->prepare($query);\r\n\r\n                                            $send_info->execute();\r\n                                            $count = $send_info->rowCount();\r\n                                            echo $count;\r\n                                        }catch (Exception $e){\r\n                                            echo $e;\r\n                                        }\r\n                                        ?></span></a>\r\n                            </h2>\r\n                            <?php\r\n                            if (strpos($_SESSION['user_role'], 'admin')||strpos($_SESSION['user_role'], 'moderator')){\r\n                                echo \" <a href=\\\"users.php?source=add_user\\\" class=\\\"card-link\\\"><i class=\\\"fas fa-pencil-alt\\\"></i> Pridať užívateľa</a>\";\r\n                            }\r\n                            ?>\r\n\r\n                            <a href=\"users.php\" class=\"card-link\"><i class=\"fas fa-list-ul\"></i> Zobraziť všetkých</a>\r\n                        </div>\r\n                    </div>\r\n                </div><!--  // class=\"col-md-4\"   -->\r\n            </div><!--  // class=\"row\"   -->\r\n\r\n\r\n            <h2 class=\"mt-3\"><i class=\"fas fa-list-ol\"></i> Posledné záznamy</h2>\r\n\r\n\r\n            <div class=\"row\" >\r\n                <div class=\"col-md-12\">\r\n                    <button class=\"btn btn-outline-primary text-left mb-3\" data-toggle=\"collapse\"  data-toggle=\"collapse\" href=\"#clanky\" role=\"button\" aria-expanded=\"true\" aria-controls=\"clanky\" style=\"width: 100%;\">\r\n                        Posledných 5 článkov: <i class=\"fas fa-caret-down text-right\"></i>\r\n                    </button>\r\n                </div>\r\n\r\n                <div class=\"col-md-12\">\r\n                <?php include 'includes/last_articles.php'; ?>  <!--LAST 5 ARTICLES-->\r\n                </div>\r\n            </div>\r\n\r\n<hr>\r\n                <div class=\"row mt-2\">\r\n                    <div class=\"col-md-12\">\r\n                        <button class=\"btn btn-outline-primary text-left mb-3\" data-toggle=\"collapse\"  data-toggle=\"collapse\" href=\"#uzivatelia\" role=\"button\" aria-expanded=\"true\" aria-controls=\"uzivatelia\" style=\"width: 100%;\">\r\n                            Posledných 5 užívateľov: <i class=\"fas fa-caret-down text-right\"></i>\r\n                        </button>\r\n                    </div>\r\n                    <p class=\"text-muted\"></p>\r\n\r\n                    <?php include 'includes/last_users.php'; ?> <!--LAST 5 USERS-->\r\n\r\n\r\n\r\n\r\n                    </div>\r\n\r\n            </div>\r\n\r\n        </main>\r\n    </div>\r\n</div>\r\n\r\n<?php\r\n\r\n\r\ninclude 'includes/footer.php';\r\n?>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- dashboard/index.php	(revision d85b7fa12db8d13f2f23fa4b471af7fa85b2e855)
+++ dashboard/index.php	(date 1605212444017)
@@ -2,7 +2,7 @@
 <?php
 include "includes/header.php"; //INCLUDE HEADER
 ?>
-<!--    <!--MOBILE NAVBAR-->
+<!--    MOBILE NAVBAR-->
     <?php
     include "includes/mobile-navigation.php"; //INCLUDE NAVIGATION FOR MOBILE
     ?>
